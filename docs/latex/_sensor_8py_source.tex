\doxysection{Sensor.\+py}
\hypertarget{_sensor_8py_source}{}\label{_sensor_8py_source}\index{Lab Final/Files On Romi/Sensor.py@{Lab Final/Files On Romi/Sensor.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00001}00001\ \textcolor{keyword}{from}\ time\ \textcolor{keyword}{import}\ ticks\_diff,\ ticks\_us\ \ \textcolor{comment}{\#\ pyright:\ ignore}}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00002}00002\ \textcolor{keyword}{from}\ pyb\ \textcolor{keyword}{import}\ UART\ \ \textcolor{comment}{\#\ pyright:\ ignore}}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00004}00004\ uart\ =\ UART(5,\ 115200)}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00007}00007\ \textcolor{comment}{\#\ Base\ class\ for\ sensors\ that\ exposes\ a\ common\ interface.}}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00008}\mbox{\hyperlink{class_sensor_1_1_sensor}{00008}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_sensor_1_1_sensor}{Sensor}}:}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00009}00009\ \ \ \ \ \textcolor{comment}{\#\ Multiply\ a\ class-\/level\ gain\ by\ the\ given\ factor.}}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00010}00010\ \ \ \ \ \textcolor{preprocessor}{@classmethod}}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00011}00011\ \ \ \ \ \textcolor{keyword}{def\ }set\_attr(cls,\ K="{}Kp"{},\ value=0.0):}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00012}00012\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ hasattr(cls,\ K):}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00013}00013\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ AttributeError(f\textcolor{stringliteral}{"{}'\{K\}'\ is\ not\ a\ defined\ gain\ on\ \{cls.\_\_name\_\_\}"{}})}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00014}00014\ \ \ \ \ \ \ \ \ setattr(cls,\ K,\ value)}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00015}00015\ \ \ \ \ \ \ \ \ print(K,\ value)}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00016}00016\ \ \ \ \ \ \ \ \ uart.write(f\textcolor{stringliteral}{"{}\{K\}\{value\}\(\backslash\)r\(\backslash\)n"{}}.encode(\textcolor{stringliteral}{"{}utf-\/8"{}}))}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00018}00018\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00019}00019\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{class_sensor_1_1_sensor_a9a4bdc6db10214eed5348959dc973d69}{\_prev\_t}}\ =\ ticks\_us()}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00020}00020\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{class_sensor_1_1_sensor_a6e6d3fb512659ab212a323467c6e0b91}{dt}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00022}00022\ \ \ \ \ \textcolor{comment}{\#\ Return\ the\ most\ recent\ scalar\ measurement\ for\ the\ sensor.}}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00023}00023\ \ \ \ \ \textcolor{keyword}{def\ }get\_data(self)\ -\/>\ float:}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00024}00024\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ NotImplementedError(\textcolor{stringliteral}{"{}Sensor\ subclasses\ must\ implement\ get\_data()."{}})}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00026}00026\ \ \ \ \ \textcolor{comment}{\#\ Refresh\ the\ stored\ time\ differential\ for\ subclasses.}}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00027}00027\ \ \ \ \ \textcolor{keyword}{def\ }update\_dt(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00028}00028\ \ \ \ \ \ \ \ \ now\ =\ ticks\_us()}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00029}00029\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{class_sensor_1_1_sensor_a6e6d3fb512659ab212a323467c6e0b91}{dt}}\ =\ ticks\_diff(now,\ self.\mbox{\hyperlink{class_sensor_1_1_sensor_a9a4bdc6db10214eed5348959dc973d69}{\_prev\_t}})}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00030}00030\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{class_sensor_1_1_sensor_a9a4bdc6db10214eed5348959dc973d69}{\_prev\_t}}\ =\ now}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00032}00032\ \ \ \ \ \textcolor{comment}{\#\ Reset\ the\ timing\ history\ used\ for\ dt\ calculations.}}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00033}00033\ \ \ \ \ \textcolor{keyword}{def\ }reset\_timing(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00034}00034\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{class_sensor_1_1_sensor_a9a4bdc6db10214eed5348959dc973d69}{\_prev\_t}}\ =\ ticks\_us()}
\DoxyCodeLine{\Hypertarget{_sensor_8py_source_l00035}00035\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{class_sensor_1_1_sensor_a6e6d3fb512659ab212a323467c6e0b91}{dt}}\ =\ 0}

\end{DoxyCode}
